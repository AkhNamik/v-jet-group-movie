(window.webpackJsonp=window.webpackJsonp||[]).push([[5,3],{239:function(e,t,n){var content=n(241);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(62).default)("0fb8d49a",content,!0,{sourceMap:!1})},240:function(e,t,n){"use strict";n(239)},241:function(e,t,n){var o=n(61)(!1);o.push([e.i,".loading[data-v-5859de1a]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center}@-webkit-keyframes circle-loading-data-v-5859de1a{to{transform:rotate(1turn)}}@keyframes circle-loading-data-v-5859de1a{to{transform:rotate(1turn)}}.loading span[data-v-5859de1a]{display:block;width:70px;height:70px;border-radius:50%;border:2px solid transparent;border-top-color:#fff;-webkit-animation:circle-loading-data-v-5859de1a 1.2s ease infinite;animation:circle-loading-data-v-5859de1a 1.2s ease infinite}",""]),e.exports=o},243:function(e,t,n){"use strict";n.r(t);var o={},r=(n(240),n(38)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loading"},[t("span")])}],!1,null,"5859de1a",null);t.default=component.exports},247:function(e,t,n){var content=n(252);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(62).default)("5c55e1e3",content,!0,{sourceMap:!1})},250:function(e,t,n){"use strict";var o=n(4),r=n(63).find,c=n(118),l="find",d=!0;l in[]&&Array(1).find((function(){d=!1})),o({target:"Array",proto:!0,forced:d},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},251:function(e,t,n){"use strict";n(247)},252:function(e,t,n){var o=n(61)(!1);o.push([e.i,".single-movie{color:#fff;min-height:100vh;display:flex;flex-direction:column;justify-content:center;padding:32px 16px}.single-movie .button{align-self:flex-start;margin-bottom:32px}.single-movie .movie-info{display:flex;flex-direction:column;align-items:center;grid-gap:32px;gap:32px;color:#fff}@media(min-width:800px){.single-movie .movie-info{flex-direction:row;align-items:flex-start}}.single-movie .movie-info .movie-img img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}@media(min-width:800px){.single-movie .movie-info .movie-img img{max-height:700px;width:auto}}.single-movie .movie-info .movie-content h1{font-size:56px;font-weight:400}.single-movie .movie-info .movie-content .movie-fact{margin-top:12px;font-size:20px;line-height:1.5;padding:10px 0}.single-movie .movie-info .movie-content .movie-fact span{font-weight:600;text-decoration:underline}.single-movie .date-content{display:flex;grid-gap:20px;gap:20px}.single-movie .date-content .time{padding:0 20px;border:1px solid #fff;color:#fff;border-radius:10px;cursor:pointer}.single-movie .date-content .time:hover{border:1px solid #7cfc00;color:#7cfc00;transition:all .3s ease-in-out}.single-movie .session-places{display:grid;grid-column-gap:5px;-moz-column-gap:5px;column-gap:5px;grid-row-gap:10px;row-gap:10px;grid-template-columns:auto;padding:20px;justify-items:center}.single-movie .session-places ul{display:flex;list-style:none}.single-movie .session-places ul>li{color:#000}.single-movie .session-places .icon-place{width:14px;height:20px;margin:0 2px;background-color:#3cb4e7;cursor:pointer;border-radius:10px}.single-movie .session-places .icon-place:hover{background-color:#7cfc00}.single-movie .session-places .icon-place-active{background-color:#7cfc00;width:14px;height:20px;margin:0 2px;cursor:pointer;display:flex;justify-content:center;text-align:center;align-items:center;color:#000;font-size:10px;font-weight:700;border-radius:10px}.single-movie .place-closed{background-color:#c92502;width:14px;height:20px;margin:0 2px;cursor:not-allowed;border-radius:10px}.single-movie .session-header{display:flex;justify-content:center;padding:10px 0}.single-movie .session-header h1{color:#000}.single-movie .selected-place{padding:20px}.single-movie .modal-actions{display:flex;justify-content:space-between;align-items:center;padding:10px}.single-movie .modal-actions button{padding:10px;border:1px solid #c92502;cursor:pointer;color:#211f1f}.single-movie .modal-actions button:hover{background:#c92502;color:#c9c9c9;transition:all .4s ease-in-out}",""]),e.exports=o},256:function(e,t,n){"use strict";n.r(t);n(39),n(35),n(40),n(32),n(41),n(42),n(36),n(50),n(51);var o=n(22),r=n(7);n(52),n(173),n(33),n(37),n(43),n(250),n(12),n(24),n(30),n(172),n(49);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var m={name:"movie-detail",data:function(){return{movie:"",sessionsDate:[],sessionPlaces:[],selectedPlace:null}},watch:{"$route.query":"$fetch"},methods:{getSingleMovie:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/movies?movie_id=".concat(e.$route.query.movie_id));case 2:n=t.sent,data=n.data,e.movie=data[0];case 5:case"end":return t.stop()}}),t)})))()},getSessionsMovies:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/movieShows?movie_id=".concat(e.$route.query.movie_id));case 2:if(n=t.sent,(data=n.data).hasOwnProperty("".concat(e.$route.query.movie_id))){t.next=6;break}return t.abrupt("return");case 6:e.sessionsDate=data["".concat(e.$route.query.movie_id)];case 7:case"end":return t.stop()}}),t)})))()},parseSessionTime:function(e){return e.split(";")},getPlaces:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.clearSessionPlaces(),r=n.appendQueryParams(e,t),o.next=4,n.$axios.$get("/showPlaces?".concat(r));case 4:c=o.sent,n.$modal.show("modal-sessions"),n.sessionPlaces=n.parsePlacesData(c),n.selectedPlace={movie_id:+n.$route.query.movie_id,showdate:t,daytime:e};case 8:case"end":return o.stop()}}),o)})))()},parsePlacesData:function(e){var t,n=[],o=d(e.data);try{var r=function(){var e=t.value,o={};e.forEach((function(e,i){e.row&&(o[Object.keys(e)]=e.row),o.places=e})),n.push(l({},o))};for(o.s();!(t=o.n()).done;)r()}catch(e){o.e(e)}finally{o.f()}return n},choosePlace:function(e,t){e&&(this.sessionPlaces=this.sessionPlaces.map((function(t){var n=t.places.find((function(t){return t===e}));return n&&(n.isSelected=!0),t.places.forEach((function(t){return t!==e?t.isSelected=!1:null})),t})),this.selectedPlace=l(l({},this.selectedPlace),{},{row:t,seat:e.seat}),this.$modal.show("modal-confirm"))},sendToBookTicket:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$modal.hide("modal-confirm"),data=l({},e.selectedPlace),t.next=4,e.$axios.$post("/bookPlace",data);case 4:if(!t.sent.error_code){t.next=8;break}return e.$modal.show("modal-error"),t.abrupt("return");case 8:return t.next=10,e.$modal.show("modal-success");case 10:case"end":return t.stop()}}),t)})))()},cancelSelectedSeat:function(){this.sessionPlaces=this.sessionPlaces.map((function(e){return e.places.forEach((function(e){return e.isSelected?e.isSelected=!1:null})),e})),this.$modal.hide("modal-confirm")},appendQueryParams:function(e,t){var n=new URLSearchParams;return n.append("daytime",e),n.append("showdate",t),n.append("movie_id",this.$route.query.movie_id),n},clearSessionPlaces:function(){this.sessionPlaces=[]}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSingleMovie();case 2:return t.next=4,e.getSessionsMovies();case 4:case"end":return t.stop()}}),t)})))()},fetchDelay:1e3},v=(n(251),n(38)),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$fetchState.pending?n("Loading"):n("div",{staticClass:"single-movie container"},[n("NuxtLink",{staticClass:"button",attrs:{to:{name:"index"}}},[e._v("\n    Back\n  ")]),e._v(" "),n("div",{staticClass:"movie-info"},[n("div",{staticClass:"movie-img"},[n("img",{attrs:{src:e.movie.image,alt:"movie image"}})]),e._v(" "),n("div",{staticClass:"movie-content"},[n("h1",[e._v(e._s(e.movie.name))]),e._v(" "),n("p",{staticClass:"movie-fact",domProps:{innerHTML:e._s(e.movie.description)}}),e._v(" "),n("div",{staticClass:"movie-fact",domProps:{innerHTML:e._s(e.movie.additional)}})])]),e._v(" "),n("div",{staticClass:"movie-content"},[n("h1",[e._v("Sessions:")]),e._v(" "),n("ul",{staticStyle:{"list-style":"none"}},e._l(e.sessionsDate,(function(t,o){return n("li",{key:o,staticStyle:{"line-height":"40px"}},[e._v("\n        "+e._s(t.showdate)+"\n        "),n("div",{staticClass:"date-content"},e._l(e.parseSessionTime(t.daytime),(function(time){return n("span",{staticClass:"time",on:{click:function(n){return e.getPlaces(time,t.showdate)}}},[e._v("\n          "+e._s(time)+"\n          ")])})),0)])})),0)]),e._v(" "),n("modal",{attrs:{name:"modal-sessions",height:"auto",width:"80%",scrollable:!0,adaptive:!0}},[n("div",{staticClass:"session-header"},[n("h1",[e._v("Screen")])]),e._v(" "),n("div",{staticClass:"session-places"},e._l(e.sessionPlaces,(function(t){return n("ul",e._l(t.places,(function(o){return n("li",[o.is_free?n("div",[o.isSelected?n("div",{staticClass:"icon-place-active"},[n("span",[e._v(e._s(o.seat))])]):n("div",{staticClass:"icon-place",on:{click:function(n){return e.choosePlace(o,t.row)}}})]):n("div",{staticClass:"place-closed"})])})),0)})),0),e._v(" "),n("modal",{attrs:{name:"modal-confirm",height:"auto",clickToClose:!1,scrollable:!0,adaptive:!0}},[n("div",{staticClass:"session-header",staticStyle:{padding:"10px"}},[n("h1",{staticStyle:{border:"none"}},[e._v("Are you sure you want to confirm your ticket purchase?")])]),e._v(" "),n("div",{staticClass:"modal-actions"},[n("button",{on:{click:e.sendToBookTicket}},[e._v("Confirm")]),e._v(" "),n("button",{on:{click:e.cancelSelectedSeat}},[e._v("Cancel")])])]),e._v(" "),n("modal",{attrs:{name:"modal-success",height:"auto",scrollable:!0,adaptive:!0},on:{closed:function(t){return e.$modal.hide("modal-sessions")}}},[n("div",{staticClass:"session-header"},[n("h1",[e._v("Ticket booked successfully!")])])]),e._v(" "),n("modal",{attrs:{name:"modal-error",height:"auto",scrollable:!0,adaptive:!0}},[n("div",{staticClass:"session-header"},[n("h1",[e._v("An error has occurred, please try again")])])])],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Loading:n(243).default})}}]);